{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.14.2/.schema/devbox.schema.json",
  "packages": [
    "go@latest",
    "ginkgo@latest",
    "buf@latest",
    "markdownlint-cli@latest",
    "evans@latest",
    "grpcurl@latest",
    "podman@latest",
    "rootlesskit@latest",
    "bun@latest",
    "chromium@latest",
    "go-tools@latest",
    "revive@latest",
    "ast-grep@latest",
    "playwright@latest",
    "playwright-driver@latest",
    "playwright-test@latest",
    "gh@latest"
  ],
  "shell": {
    "init_hook": [
      "echo 'Welcome to devbox!' > /dev/null"
    ],
    "scripts": {
      "fe:test": [
        "./scripts/run_fe_tests.sh $@"
      ],
      "fe:lint": [
        "./scripts/run_fe_lint.sh"
      ],
      "fe:typecheck": [
        "cd static/js && bun install && bun run typecheck"
      ],
      "lint:md": [
        "markdownlint --fix '**/*.md' --ignore vendor"
      ],
      "go:test": [
        "./scripts/run_go_test.sh"
      ],
      "go:lint": [
        "./scripts/run_go_lint.sh"
      ],
      "go:coverage": [
        "go list ./... | grep -v \"/gen/\" | xargs go test -coverprofile=coverage.out",
        "go tool cover -func=coverage.out | tail -1"
      ],
      "go:generate": [
        "go generate ./..."
      ],
      "go:deadcode": [
        "go run golang.org/x/tools/cmd/deadcode@latest ."
      ],
      "lint:everything": [
        "./scripts/run_lint_everything.sh"
      ],
      "build": [
        "./scripts/build.sh $@"
      ],
      "storybook": [
        "cd static/js && bun install && bun run storybook"
      ],
      "storybook:build": [
        "cd static/js && bun install && bun run build-storybook"
      ],
      "e2e:test": [
        "devbox run build",
        "export CHROMIUM_BIN=$(which chromium)",
        "cd e2e && bun install && bunx playwright test"
      ],
      "e2e:test:headed": [
        "devbox run build",
        "export CHROMIUM_BIN=$(which chromium)",
        "cd e2e && bun install && bun run test:headed"
      ],
      "e2e:codegen": [
        "cd e2e & playwright codegen --browser=chromium http://localhost:8050/home"
      ],
      "deploy": [
        "./scripts/deploy.sh $@"
      ]
    }
  }
}
