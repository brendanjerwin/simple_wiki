{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.14.2/.schema/devbox.schema.json",
  "packages": [
    "go@latest",
    "ginkgo@latest",
    "buf@latest",
    "markdownlint-cli@latest",
    "evans@latest",
    "grpcurl@latest",
    "podman@latest",
    "rootlesskit@latest",
    "bun@latest",
    "chromium@latest",
    "go-tools",
    "revive@latest",
    "ast-grep@latest"
  ],
  "shell": {
    "init_hook": [
      "echo 'Welcome to devbox!' > /dev/null"
    ],
    "scripts": {
      "fe:test": [
        "export CHROMIUM_BIN=$(which chromium) && cd static/js && bun install && bun run test:wtr ${CI_COVERAGE:+--coverage}"
      ],
      "fe:lint": [
        "cd static/js && bun install && bun run -- eslint . --ext .ts --max-warnings 0"
      ],
      "lint:md": [
        "markdownlint --fix '**/*.md' --ignore vendor"
      ],
      "go:test": [
        "go test ./..."
      ],
      "go:lint": [
        "revive -config revive.toml -set_exit_status ./..."
      ],
      "lint:everything": [
        "if git status --porcelain api/proto | grep -q '.'; then buf generate; else echo 'No changes in api/proto, skipping buf generate.'; fi",
        "go mod tidy",
        "go test ./...",
        "markdownlint --fix '**/*.md' --ignore vendor",
        "export CHROMIUM_BIN=$(which chromium)",
        "cd static/js && bun install && bun run build && bun run test && bun run lint"
      ]
    }
  }
}
